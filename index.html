<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>guder oval</title>
    <link href="index.css" rel="stylesheet">
</head>

<body>
    <script>
        customElements.define(
  "guder-oval",
  class extends HTMLElement {
    constructor() {
      super();

      const shadow = this.attachShadow({ mode: "closed" });
      shadow.innerHTML = `<canvas style="display: none;"></canvas><style>:host {display: block;}</style>`;

      const canvas = shadow.firstElementChild;
      const context = canvas.getContext("2d");

      const sqrtPI = 2 * Math.sqrt(Math.PI)
      const ex2erfc = t => 3 / (t * sqrtPI + Math.sqrt(9 + t * t * Math.PI))
      const erf = t => 1 - ex2erfc(t) * Math.exp(-t * t)

      const x = t => erf(Math.cos(t) / Math.abs(Math.sin(t)))
      const y = t => erf(Math.sin(t) / Math.abs(Math.cos(t)))
        
      context.fillStyle = "#ffff";
      let url = "";
      const resizeObserver = new ResizeObserver(() => {
        const width = this.clientWidth;
        const height = this.clientHeight;
        canvas.width = width;
        canvas.height = height;

        const centerX = width / 2;
        const centerY = height / 2;
        const centerMin = Math.min(centerX, centerY);
        const offsetX = centerX - centerMin;
        const offsetY = centerY - centerMin;

        context.beginPath();
        context.moveTo(width, centerY);

        for (let t = 0.01; t < 2 * Math.PI; t += 0.1) {
            const X = x(t)
            const Y = y(t)
            const i = centerX + offsetX * Math.sign(X) + centerMin * X;
            const j = centerY + offsetY * Math.sign(Y) + centerMin * Y;
            context.lineTo(i, j);
        }

        context.closePath();
        context.fill();

        const maskImage = canvas.toDataURL();
        this.style.maskImage = `url(${maskImage})`;
        this.style.webkitMaskImage = `url(${maskImage})`;
      });

      resizeObserver.observe(this);
    }
  },
);
    </script>
<div>
    <guder-oval></guder-oval>
</div>
</body>

</html>
